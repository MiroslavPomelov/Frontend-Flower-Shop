# Развертывание Flower Shop на Timeweb

## Подготовка проекта

1. Убедитесь, что все изменения закоммичены в Git
2. Проверьте, что Dockerfile и .dockerignore находятся в корне проекта

## Настройка на Timeweb

### 1. Создание Docker-контейнера
- Войдите в панель управления Timeweb
- Перейдите в раздел "Контейнеры" → "Создать контейнер"
- Выберите "Docker" как тип контейнера

### 2. Настройка контейнера
- **Имя**: flower-shop
- **Образ**: Укажите путь к вашему Docker образу или используйте автоматическую сборку
- **Порт**: 3000
- **Переменные окружения** (если нужны):
  ```
  NODE_ENV=production
  PORT=3000
  ```

### 3. Автоматическая сборка (рекомендуется)
- Подключите ваш Git репозиторий
- Укажите ветку (обычно main или master)
- Установите команду сборки: `docker build -t flower-shop .`
- Установите команду запуска: `docker run -p 3000:3000 flower-shop`

### 4. Ручная сборка
Если используете ручную сборку:
```bash
# В терминале Timeweb или локально
docker build -t flower-shop .
docker push your-registry/flower-shop:latest
```

## Проверка развертывания

1. После успешной сборки контейнер должен запуститься
2. Проверьте логи на наличие ошибок
3. Откройте приложение по адресу: `http://your-domain:3000`

## Возможные проблемы и решения

### Ошибка "Could not read package.json"
- Убедитесь, что Dockerfile находится в корне проекта (там же, где package.json)
- Проверьте, что .dockerignore не исключает package.json

### Ошибка сборки Next.js
- Проверьте, что в next.config.js установлен `output: 'standalone'`
- Убедитесь, что все зависимости указаны в package.json

### Проблемы с портами
- Проверьте, что порт 3000 открыт в настройках Timeweb
- Убедитесь, что в Dockerfile указан `EXPOSE 3000`

## Мониторинг

- Регулярно проверяйте логи контейнера
- Мониторьте использование ресурсов
- Настройте автоматическое перезапуск при сбоях

## Обновление приложения

При обновлении кода:
1. Запустите новую сборку в Timeweb
2. Проверьте работоспособность
3. При необходимости откатитесь к предыдущей версии
